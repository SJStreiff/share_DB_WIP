#debugging
dat <- read.csv('~/Sync/1_Annonaceae/share_DB_WIP/4_DB/G_t_cleaned.csv')
#debugging
dat <- read.csv('~/Sync/1_Annonaceae/share_DB_WIP/4_DB/G_t_cleaned.csv', sep =';', head=T)
# read the csv data
dat <- read.csv(inputfile, header = TRUE, sep = ';')
dat <- data.frame(dat)  # checking
dat <- dat[!is.na(dat$ddlong),] # checking that all records have coordinates...
#debugging
dat <- read.csv('~/Sync/1_Annonaceae/share_DB_WIP/4_DB/G_t_cleaned.csv', sep =';', head=T)
#debugging
dat <- read.csv('~/Sync/1_Annonaceae/share_DB_WIP/4_DB/G_t_cleaned.csv', sep =';', head=T)
dat <- data.frame(dat)  # checking
dat <- dat[!is.na(dat$ddlong),] # checking that all records have coordinates...
flags <- clean_coordinates(x = dat,
lon = "ddlong",
lat = "ddlat",
species = 'scientific_name',
countries = "country_iso3",
tests = c("capitals", "centroids", "equal","gbif", "institutions",
"zeros", "countries" ))
package_list <- c('optparse',
'rnaturalearthdata',
'CoordinateCleaner') # or geocodeR etc.; ShinyCCleaner is not findable yet... Unpublished
# argument parsing to launch from command line or bash launch script
option_list <- list(
make_option(c("-i", "--input"), type="character", default=FALSE,
dest="input_name", help="Filepath of input file"),
make_option(c("-o", "--output"),type="character", default=FALSE,
dest = "output_file", help="Output file path including prefix")
)
# and load the packages
sapply(package_list, require, character.only=TRUE) # load all packages
flags <- clean_coordinates(x = dat,
lon = "ddlong",
lat = "ddlat",
species = 'scientific_name',
countries = "country_iso3",
tests = c("capitals", "centroids", "equal","gbif", "institutions",
"zeros", "countries" ))
